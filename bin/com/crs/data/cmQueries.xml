<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CarpoolMember">
	<resultMap id="result" type="CarpoolMember">
		<result property="employeeID" column="employee_id" />
		<result property="carpoolID" column="carpool_id" />
		<result property="dateJoined" column="date_joined" />
		<result property="isDriver" column="is_driver" />
		<result property="pickUp" column="pick_up" />
		<result property="isTemporary" column="is_temporary" />
	</resultMap>

	<insert id="insertRecord" parameterType="CarpoolMember">
		INSERT INTO CarpoolMember (employee_id,carpool_id,is_driver,is_temporary)
		VALUES (#{employeeID},#{carpoolID},#{isDriver},#{isTemporary})
	</insert>

	<select id="carpoolMembers" parameterType="int" resultMap="result">
		SELECT * FROM CarpoolMember WHERE carpool_id = #{value}
	</select>

	<update id="cancelPickup" parameterType="CarpoolMember">
		UPDATE CarpoolMember SET pick_up = 0 WHERE employee_id = #{employeeID}
	</update>

	<delete id="removeMember" parameterType="CarpoolMember">
		DELETE FROM CarpoolMember WHERE employee_id = #{employeeID}
	</delete>

	<delete id="removeTemporaryMembers" parameterType="CarpoolMember">
		DELETE FROM CarpoolMember WHERE is_temporary = 1
	</delete>
</mapper>